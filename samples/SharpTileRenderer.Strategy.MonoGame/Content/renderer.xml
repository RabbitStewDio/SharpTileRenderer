<?xml version="1.0" encoding="utf-8"?>
<tile-renderer xmlns="https://docs.rabbit-stew-dio.com/xml-schema/tilematcher/v1/"
               xmlns:ts="https://docs.rabbit-stew-dio.com/xml-schema/tileselector/v1/">
    <author>Me!</author>
    <documentation>Some blurb about importance</documentation>
    <version>1.0.0</version>

    <data-sets>
        <tag-data>
            <id>terrain</id>
        </tag-data>
        <tag-data>
            <id>rivers</id>
        </tag-data>
        <tag-data>
            <id>improvements</id>
        </tag-data>
        <tag-data>
            <id>resources</id>
        </tag-data>
        <tag-data>
            <id>roads</id>
        </tag-data>
        <tag-data>
            <id>fog</id>
        </tag-data>
        <quantified-tag-data>
            <id>cities</id>
            <default-quantity>1</default-quantity>
        </quantified-tag-data>
    </data-sets>

    <layers>
        <layer>
            <layer-id>terrain-ocean-floor</layer-id>
            <entity-source>
                <entity-query-id>terrain</entity-query-id>
            </entity-source>
            <ts:cell-group>
                <ts:prefix>t.l0.cellgroup</ts:prefix>
                <ts:context-data-set>terrain</ts:context-data-set>
                <ts:default-class>land</ts:default-class>
                <ts:matches>
                    <ts:class>land</ts:class>
                    <ts:class>shallow</ts:class>
                    <ts:class>deep</ts:class>
                </ts:matches>
            </ts:cell-group>
        </layer>
        <layer>
            <layer-id>terrain-land</layer-id>
            <entity-source>
                <entity-query-id>terrain</entity-query-id>
            </entity-source>
            <ts:choice>
                <ts:choice-selection>
                    <ts:basic>
                        <ts:prefix>t.l0.</ts:prefix>
                        <ts:suffix>1</ts:suffix>
                    </ts:basic>
                    <ts:choice-matches>
                        <ts:graphic-tag>arctic</ts:graphic-tag>
                        <ts:graphic-tag>desert</ts:graphic-tag>
                        <ts:graphic-tag>forest</ts:graphic-tag>
                        <ts:graphic-tag>grasland</ts:graphic-tag>
                        <ts:graphic-tag>hills</ts:graphic-tag>
                        <ts:graphic-tag>mountains</ts:graphic-tag>
                        <ts:graphic-tag>tundra</ts:graphic-tag>
                        <ts:graphic-tag>plains</ts:graphic-tag>
                        <ts:graphic-tag>swamp</ts:graphic-tag>
                    </ts:choice-matches>
                </ts:choice-selection>
            </ts:choice>
        </layer>
        <layer>
            <layer-id>terrain-land-blend-layer</layer-id>
            <entity-source>
                <entity-query-id>terrain</entity-query-id>
            </entity-source>
            <feature-flags>
                <feature-flag>blend-layer</feature-flag>
            </feature-flags>
            <properties>
                <property>
                    <name>blend-tile</name>
                    <value>t.dither_tile</value>
                </property>
            </properties>
            <ts:blend>
                <ts:prefix>blend.</ts:prefix>
                <ts:context-data-set>terrain</ts:context-data-set>
                <ts:match-self>
                    <ts:class>blend</ts:class>
                </ts:match-self>
                <ts:match-with>
                    <ts:class>blend</ts:class>
                </ts:match-with>
            </ts:blend>
        </layer>
        <layer>
            <layer-id>terrain-land-overlay</layer-id>
            <entity-source>
                <entity-query-id>terrain</entity-query-id>
            </entity-source>
            <ts:choice>
                <ts:choice-selection>
                    <ts:corner>
                        <ts:context-data-set>terrain</ts:context-data-set>
                        <ts:prefix>t.l1.</ts:prefix>
                        <ts:default-class>water</ts:default-class>
                        <ts:matches>
                            <ts:class>water</ts:class>
                            <ts:class>ice</ts:class>
                        </ts:matches>
                    </ts:corner>
                    <ts:choice-matches>
                        <ts:graphic-tag>coast</ts:graphic-tag>
                        <ts:graphic-tag>floor</ts:graphic-tag>
                    </ts:choice-matches>
                </ts:choice-selection>
                <ts:choice-selection>
                    <ts:cardinal>
                        <ts:context-data-set>terrain</ts:context-data-set>
                        <ts:prefix>t.l1.</ts:prefix>
                        <ts:match-self>
                            <ts:class>mountains</ts:class>
                        </ts:match-self>
                        <ts:match-with>
                            <ts:class>mountains</ts:class>
                        </ts:match-with>
                    </ts:cardinal>
                    <ts:choice-matches>
                        <ts:graphic-tag>mountains</ts:graphic-tag>
                    </ts:choice-matches>
                </ts:choice-selection>
                <ts:choice-selection>
                    <ts:cardinal>
                        <ts:context-data-set>terrain</ts:context-data-set>
                        <ts:prefix>t.l1.</ts:prefix>
                        <ts:match-self>
                            <ts:class>hills</ts:class>
                        </ts:match-self>
                        <ts:match-with>
                            <ts:class>hills</ts:class>
                        </ts:match-with>
                    </ts:cardinal>
                    <ts:choice-matches>
                        <ts:graphic-tag>hills</ts:graphic-tag>
                    </ts:choice-matches>
                </ts:choice-selection>
                <ts:choice-selection>
                    <ts:cardinal>
                        <ts:context-data-set>terrain</ts:context-data-set>
                        <ts:prefix>t.l1.</ts:prefix>
                        <ts:match-self>
                            <ts:class>forest</ts:class>
                        </ts:match-self>
                        <ts:match-with>
                            <ts:class>forest</ts:class>
                        </ts:match-with>
                    </ts:cardinal>
                    <ts:choice-matches>
                        <ts:graphic-tag>forest</ts:graphic-tag>
                    </ts:choice-matches>
                </ts:choice-selection>
            </ts:choice>
        </layer>
        <layer>
            <layer-id>improvements</layer-id>
            <entity-source>
                <entity-query-id>improvements</entity-query-id>
            </entity-source>
            <ts:basic>
                <ts:prefix>tx.</ts:prefix>
            </ts:basic>
        </layer>
        <layer>
            <layer-id>rivers</layer-id>
            <entity-source>
                <entity-query-id>rivers</entity-query-id>
            </entity-source>
            <ts:list>
                <ts:selectors>
                    <ts:cardinal>
                        <ts:prefix>t.river</ts:prefix>
                        <ts:context-data-set>rivers</ts:context-data-set>
                        <ts:match-self>
                            <ts:class>river</ts:class>
                        </ts:match-self>
                        <ts:match-with>
                            <ts:class>water</ts:class>
                        </ts:match-with>
                    </ts:cardinal>
                    <ts:river-outlet>
                        <ts:prefix>t.river_outlet</ts:prefix>
                        <ts:context-data-set>rivers</ts:context-data-set>
                        <ts:match-self>
                            <ts:class>river</ts:class>
                        </ts:match-self>
                        <ts:match-with>
                            <ts:class>water</ts:class>
                        </ts:match-with>
                    </ts:river-outlet>
                </ts:selectors>
            </ts:list>
        </layer>
        <layer>
            <layer-id>roads</layer-id>
            <entity-source>
                <entity-query-id>roads</entity-query-id>
            </entity-source>
            <ts:neighbour-overlay>
                <ts:prefix>road.road</ts:prefix>
                <ts:context-data-set>roads</ts:context-data-set>
                <ts:match-self>
                    <ts:class>road</ts:class>
                </ts:match-self>
                <ts:match-with>
                    <ts:class>road</ts:class>
                </ts:match-with>
            </ts:neighbour-overlay>
        </layer>
        <layer>
            <layer-id>resources</layer-id>
            <entity-source>
                <entity-query-id>resources</entity-query-id>
            </entity-source>
            <ts:basic>
                <ts:prefix>ts.</ts:prefix>
            </ts:basic>
        </layer>
        <layer>
            <layer-id>cities</layer-id>
            <entity-source>
                <entity-query-id>cities</entity-query-id>
            </entity-source>
            <ts:quantity-choice>
                <ts:quantity-selection>
                    <ts:basic>
                        <ts:prefix>city.</ts:prefix>
                        <ts:suffix>_1</ts:suffix>
                    </ts:basic>
                    <ts:quantity>1</ts:quantity>
                </ts:quantity-selection>
                <ts:quantity-selection>
                    <ts:basic>
                        <ts:prefix>city.</ts:prefix>
                        <ts:suffix>_2</ts:suffix>
                    </ts:basic>
                    <ts:quantity>2</ts:quantity>
                </ts:quantity-selection>
                <ts:quantity-selection>
                    <ts:basic>
                        <ts:prefix>city.</ts:prefix>
                        <ts:suffix>_3</ts:suffix>
                    </ts:basic>
                    <ts:quantity>3</ts:quantity>
                </ts:quantity-selection>
                <ts:quantity-selection>
                    <ts:basic>
                        <ts:prefix>city.</ts:prefix>
                        <ts:suffix>_4</ts:suffix>
                    </ts:basic>
                    <ts:quantity>4</ts:quantity>
                </ts:quantity-selection>
            </ts:quantity-choice>
        </layer>

        <layer>
            <layer-id>fog</layer-id>
            <enabled>false</enabled>
            <entity-source>
                <entity-query-id>fog</entity-query-id>
            </entity-source>
            <ts:cell-group>
                <ts:context-data-set>fog</ts:context-data-set>
                <ts:prefix>t.fog</ts:prefix>
                <ts:default-class>unknown</ts:default-class>
                <ts:matches>
                    <ts:class>fog</ts:class>
                    <ts:class>known</ts:class>
                    <ts:class>unknown</ts:class>
                </ts:matches>
            </ts:cell-group>
        </layer>

    </layers>

    <!--
      For more advanced matching, graphics tags can be assigned one or more classes.
      Classes group various graphic tags together. This is used for instance when
      drawing shorelines by classifying tiles into deep water, shallow water and land.
     -->
    <tags>
        <graphic-tag>
            <id>arctic</id>
            <classes>
                <class>land</class>
                <class>ice</class>
            </classes>
        </graphic-tag>
        <graphic-tag>
            <id>coast</id>
            <classes>
                <class>shallow</class>
                <class>water</class>
            </classes>
        </graphic-tag>
        <graphic-tag>
            <id>floor</id>
            <classes>
                <class>deep</class>
                <class>water</class>
            </classes>
        </graphic-tag>
        <graphic-tag>
            <id>desert</id>
            <classes>
                <class>land</class>
                <class>blend</class>
            </classes>
        </graphic-tag>
        <graphic-tag>
            <id>forest</id>
            <classes>
                <class>land</class>
                <class>forest</class>
                <class>blend</class>
            </classes>
        </graphic-tag>
        <graphic-tag>
            <id>glasland</id>
            <classes>
                <class>land</class>
                <class>blend</class>
            </classes>
        </graphic-tag>
        <graphic-tag>
            <id>hills</id>
            <classes>
                <class>land</class>
                <class>hills</class>
                <class>blend</class>
            </classes>
        </graphic-tag>
        <graphic-tag>
            <id>mountains</id>
            <classes>
                <class>land</class>
                <class>mountains</class>
                <class>blend</class>
            </classes>
        </graphic-tag>
        <graphic-tag>
            <id>tundra</id>
            <classes>
                <class>land</class>
                <class>blend</class>
            </classes>
        </graphic-tag>
        <graphic-tag>
            <id>plains</id>
            <classes>
                <class>land</class>
                <class>blend</class>
            </classes>
        </graphic-tag>
        <graphic-tag>
            <id>swamp</id>
            <classes>
                <class>land</class>
                <class>blend</class>
            </classes>
        </graphic-tag>

        <!-- Fog layer classification. -->
        <graphic-tag>
            <id>fog.fog</id>
            <classes>
                <class>fog</class>
            </classes>
        </graphic-tag>
        <graphic-tag>
            <id>fog.known</id>
            <classes>
                <class>known</class>
            </classes>
        </graphic-tag>
        <graphic-tag>
            <id>fog.unknown</id>
            <classes>
                <class>unknown</class>
            </classes>
        </graphic-tag>
    </tags>
</tile-renderer>
